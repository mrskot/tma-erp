<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMA-ERP –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –°–ë–†–û–° –°–¢–ò–õ–ï–ô */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        .navbar {
            background: white;
            border-radius: 15px;
            padding: 20px 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .nav-brand h1 {
            color: #4a5568;
            margin-bottom: 5px;
            font-size: 24px;
        }
        
        .nav-brand p {
            color: #718096;
            font-size: 14px;
        }
        
        /* –ö–ù–û–ü–ö–ò */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .btn-primary { background: #4c6ef5; color: white; }
        .btn-secondary { background: #868e96; color: white; }
        .btn-success { background: #40c057; color: white; }
        .btn-warning { background: #fab005; color: white; }
        .btn-info { background: #228be6; color: white; }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* –ö–ê–†–¢–û–ß–ö–ò –ú–ï–ù–Æ */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .menu-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-decoration: none;
            color: inherit;
            display: block;
            border-left: 4px solid #4c6ef5;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            background: #f8f9fa;
        }
        
        .menu-icon {
            font-size: 32px;
            color: #4c6ef5;
            margin-bottom: 15px;
        }
        
        .menu-card h3 {
            margin-bottom: 10px;
            color: #2d3748;
            font-size: 18px;
        }
        
        .menu-card p {
            color: #718096;
            font-size: 14px;
            line-height: 1.5;
        }
        
        /* –°–¢–ê–¢–ò–°–¢–ò–ö–ê */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            border-top: 4px solid #40c057;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: #718096;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–ò–õ–ò */
        .admin-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .admin-section h2 {
            color: #4a5568;
            margin-bottom: 25px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* –¶–í–ï–¢–ê –î–õ–Ø –¢–ï–°–¢–ê */
        .test-green { color: #40c057 !important; }
        .test-red { color: #fa5252 !important; }
        .test-blue { color: #4c6ef5 !important; }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
        <nav class="navbar">
            <div class="nav-brand">
                <h1 class="test-blue"><i class="fas fa-cogs"></i> TMA-ERP –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                <p class="test-green">‚úÖ –°—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã! –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–æ–º</p>
            </div>
            <div class="nav-links">
                <a href="/" class="btn btn-secondary">
                    <i class="fas fa-home"></i> –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </a>
                <a href="/api/v1/health" target="_blank" class="btn btn-info">
                    <i class="fas fa-heart-pulse"></i> API Status
                </a>
            </div>
        </nav>

        <!-- –ú–ï–ù–Æ –ê–î–ú–ò–ù–ö–ò -->
        <div class="admin-section">
            <h2><i class="fas fa-th-large"></i> –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
            <div class="menu-grid">
                <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
                <a href="/admin/users" class="menu-card">
                    <div class="menu-icon">
                        <i class="fas fa-users-cog"></i>
                    </div>
                    <h3><span class="test-blue">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span></h3>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ä–æ–ª—è–º–∏, –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞</p>
                    <small class="test-green">3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ</small>
                </a>

                <!-- –£—á–∞—Å—Ç–∫–∏ -->
                <a href="/admin/lots" class="menu-card">
                    <div class="menu-icon">
                        <i class="fas fa-industry"></i>
                    </div>
                    <h3><span class="test-blue">üè≠ –£—á–∞—Å—Ç–∫–∏</span></h3>
                    <p>–¶–µ—Ö–∞, –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –ª–∏–Ω–∏–∏, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–æ–≤</p>
                    <small class="test-green">3 —É—á–∞—Å—Ç–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ</small>
                </a>

                <!-- –ò–∑–¥–µ–ª–∏—è -->
                <a href="/admin/products" class="menu-card">
                    <div class="menu-icon">
                        <i class="fas fa-cubes"></i>
                    </div>
                    <h3><span class="test-blue">üì¶ –ò–∑–¥–µ–ª–∏—è</span></h3>
                    <p>–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞, —á–µ—Ä—Ç–µ–∂–∏, —Å–µ—Ä–∏–π–Ω—ã–µ –Ω–æ–º–µ—Ä–∞, –º–∞—Ä—à—Ä—É—Ç—ã</p>
                    <small class="test-green">5 –∏–∑–¥–µ–ª–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ</small>
                </a>

                <!-- –ó–∞—è–≤–∫–∏ -->
                <a href="/admin/applications" class="menu-card">
                    <div class="menu-icon">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                    <h3><span class="test-blue">üìã –ó–∞—è–≤–∫–∏</span></h3>
                    <p>–ó–∞—è–≤–∫–∏ –Ω–∞ –ø—Ä–∏—ë–º–∫—É –û–¢–ö, —Å—Ç–∞—Ç—É—Å—ã, –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫</p>
                    <small class="test-green">2 –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏</small>
                </a>

                <!-- –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è -->
                <a href="/admin/discrepancies" class="menu-card">
                    <div class="menu-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3><span class="test-blue">‚ö†Ô∏è –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è</span></h3>
                    <p>–î–µ—Ñ–µ–∫—Ç—ã, –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –±—Ä–∞–∫, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</p>
                    <small class="test-red">1 –∞–∫—Ç–∏–≤–Ω–æ–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ</small>
                </a>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <a href="#" onclick="alert('–†–∞–∑–¥–µ–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')" class="menu-card" style="cursor: pointer;">
                    <div class="menu-icon">
                        <i class="fas fa-sliders-h"></i>
                    </div>
                    <h3><span class="test-blue">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></h3>
                    <p>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç—ã</p>
                    <small class="test-green">–î–æ—Å—Ç—É–ø–Ω–æ: Bitrix24, Telegram</small>
                </a>
            </div>
        </div>

        <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
        <div class="admin-section">
            <h2><i class="fas fa-chart-bar"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="stat-users">3</div>
                    <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    <small>üë§ 2 –º–∞—Å—Ç–µ—Ä–∞, 1 –∫–æ–Ω—Ç—Ä–æ–ª—ë—Ä</small>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-lots">3</div>
                    <div class="stat-label">–£—á–∞—Å—Ç–∫–æ–≤</div>
                    <small>üè≠ –°–≤–∞—Ä–∫–∞, –ú–µ—Ö–∞–Ω–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞, –°–±–æ—Ä–∫–∞</small>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-products">5</div>
                    <div class="stat-label">–ò–∑–¥–µ–ª–∏–π</div>
                    <small>üì¶ –ö—Ä—ã—à–∫–∏, –∫–æ—Ä–ø—É—Å–∞, –≤–∞–ª—ã, —Ñ–ª–∞–Ω—Ü—ã</small>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-applications">2</div>
                    <div class="stat-label">–ó–∞—è–≤–æ–∫</div>
                    <small>üìã 1 –Ω–æ–≤–∞—è, 1 –≤ —Ä–∞–±–æ—Ç–µ</small>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-discrepancies">1</div>
                    <div class="stat-label">–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π</div>
                    <small>‚ö†Ô∏è 1 –≤ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏</small>
                </div>
            </div>
        </div>

        <!-- –ë–´–°–¢–†–´–ï –î–ï–ô–°–¢–í–ò–Ø -->
        <div class="admin-section">
            <h2><i class="fas fa-bolt"></i> –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <button onclick="createUser()" class="btn btn-success">
                    <i class="fas fa-user-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                </button>
                <button onclick="createLot()" class="btn btn-primary">
                    <i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å —É—á–∞—Å—Ç–æ–∫
                </button>
                <button onclick="createProduct()" class="btn btn-info">
                    <i class="fas fa-cube"></i> –î–æ–±–∞–≤–∏—Ç—å –∏–∑–¥–µ–ª–∏–µ
                </button>
                <button onclick="viewApi()" class="btn btn-warning">
                    <i class="fas fa-code"></i> API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
                </button>
            </div>
        </div>

        <!-- –ò–ù–§–û–†–ú–ê–¶–ò–Ø -->
        <div class="admin-section">
            <h2><i class="fas fa-info-circle"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h3><i class="fas fa-server"></i> –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    <p><strong>–í–µ—Ä—Å–∏—è:</strong> TMA-ERP v1.0</p>
                    <p><strong>API:</strong> <span id="api-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></p>
                    <p><strong>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:</strong> PostgreSQL 14+</p>
                    <p><strong>–°–µ—Ä–≤–µ—Ä:</strong> Node.js + Express</p>
                </div>
                <div>
                    <h3><i class="fas fa-rocket"></i> –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</h3>
                    <p>‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏</p>
                    <p>‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–∫–∞–º–∏ –∏ –∏–∑–¥–µ–ª–∏—è–º–∏</p>
                    <p>‚úÖ –ó–∞—è–≤–∫–∏ –Ω–∞ –ø—Ä–∏—ë–º–∫—É –û–¢–ö</p>
                    <p>‚úÖ –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (–¥–µ—Ñ–µ–∫—Ç—ã, –ö–†, –±—Ä–∞–∫)</p>
                    <p>üîÑ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</p>
                    <p>üîÑ Bitrix24 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ API
        async function checkApi() {
            try {
                const response = await fetch('/api/v1/health');
                const data = await response.json();
                document.getElementById('api-status').innerHTML = 
                    '<span class="test-green">‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (' + data.timestamp + ')</span>';
            } catch (error) {
                document.getElementById('api-status').innerHTML = 
                    '<span class="test-red">‚ùå –û—à–∏–±–∫–∞: ' + error.message + '</span>';
            }
        }
        
        // –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
        function createUser() {
            alert('–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ');
        }
        
        function createLot() {
            alert('–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—á–∞—Å—Ç–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }
        
        function createProduct() {
            alert('–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–¥–µ–ª–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }
        
        function viewApi() {
            window.open('/api/v1/health', '_blank');
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadRealStats() {
            try {
                const endpoints = [
                    '/api/v1/users',
                    '/api/v1/lots', 
                    '/api/v1/products',
                    '/api/v1/applications',
                    '/api/v1/discrepancies?status=in_resolution'
                ];
                
                const responses = await Promise.all(endpoints.map(url => fetch(url).then(r => r.json())));
                
                if (responses[0].success) document.getElementById('stat-users').textContent = responses[0].count;
                if (responses[1].success) document.getElementById('stat-lots').textContent = responses[1].count;
                if (responses[2].success) document.getElementById('stat-products').textContent = responses[2].count;
                if (responses[3].success) document.getElementById('stat-applications').textContent = responses[3].count;
                if (responses[4].success) document.getElementById('stat-discrepancies').textContent = responses[4].count;
                
                console.log('‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            checkApi();
            loadRealStats();
            console.log('‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        });
    </script>
</body>
</html>
